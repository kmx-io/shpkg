#!/bin/sh
# Copyright 2023 Thomas de Grivel

set -e

# Config
SHPKG_DIR=${SHPKG_DIR:-~/shpkg}

# SHPKG
. ${SHPKG_DIR}/lib/shpkg.subr

# CLI
if [ "x$1" = "xclone" ]; then
    shift
    verbose shpkg_clone "$@"
    exit
elif [ "x$1" = "xconfigure" ]; then
    shift
    verbose shpkg_configure "$@"
    exit
elif [ "x$1" = "xfetch" ] ||
     [ "x$1" = "xf" ]; then
    shift
    verbose shpkg_fetch "$@"
    exit
elif [ "x$1" = "xinstall" ] ||
     [ "x$1" = "xi" ]; then
    shift
    verbose shpkg_install "$@"
    exit
elif [ "x$1" = "xpull" ] ||
     [ "x$1" = "xp" ]; then
    shift
    verbose shpkg_pull "$@"
    exit
elif [ "x$1" = "xremove" ] ||
     [ "x$1" = "xrm" ]; then
    shift
    verbose shpkg_uninstall "$@"
    verbose shpkg_remove "$@"
    exit
elif [ "x$1" = "xupdate" ]; then
    verbose shpkg_update
    exit
elif [ "x$1" = "xupgrade" ]; then
    shift
    verbose shpkg_upgrade "$@"
    exit
fi

echo "Usage: $0 (clone|fetch|pull|remove) PKG ..." >&2
exit 1
